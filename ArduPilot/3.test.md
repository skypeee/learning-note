我在ArduCopter/Copter.h文件里的class Copter : public AP_Vehicle 这个类里，定义了一个public的函数，    void my_test_scheduler_task();
在Copter.cpp里实现了

void Copter::my_test_scheduler_task()
{
    static uint32_t first_run_ms = 0;
    if (first_run_ms == 0) {
        first_run_ms = millis();  // 记录首次运行时间
    }

    // 启动后前 1000ms（1秒）内不执行，避开初始化阶段
    if (millis() - first_run_ms < 1000) {
        return;
    }
    gcs().send_text(MAV_SEVERITY_INFO, "My custom 1Hz task running!");
}

然后加到这个数组里添加到定时任务const AP_Scheduler::Task Copter::scheduler_tasks[]
    SCHED_TASK(my_test_scheduler_task, 1, 75, 170),
然后运行sim_vehicle.py -v ArduCopter --console，就可以看到定时任务的输出了，不过如果我不加这两个if 判断，就会一直输出AP: P: PreArm: Internal errors 0x100000 l:161 flow_of_ctrl
感觉飞控出了些异常

P: PreArm: Internal errors 0x100000 l:161 flow_of_ctrl
AP: My custom 1Hz task running!
AP: My custom 1Hz task running!
AP: My custom 1Hz task running!
AP: My custom 1Hz task running!
AP: My custom 1Hz task running!
AP: My custom 1Hz task running!
AP: My custom 1Hz task running!
AP: My custom 1Hz task running!
AP: My custom 1Hz task running!
AP: My custom 1Hz task running!
AP: My custom 1Hz task running!


加上之后最开始会提示AP: Internal Errors 0x100000，后面不会重复提示了

AP: Internal Errors 0x100000
AP: RC7: SaveWaypoint LOW
AP: My custom 1Hz task running!
AP: EKF3 IMU0 initialised
AP: EKF3 IMU1 initialised
AP: AHRS: EKF3 active
AP: My custom 1Hz task running!
AP: EKF3 IMU1 tilt alignment complete
AP: EKF3 IMU0 tilt alignment complete
AP: EKF3 IMU1 MAG0 initial yaw alignment complete
AP: EKF3 IMU0 MAG0 initial yaw alignment complete
AP: My custom 1Hz task running!
AP: My custom 1Hz task running!
AP: GPS 1: probing for u-blox at 230400 baud
AP: GPS 1: detected u-blox
Got COMMAND_ACK: SET_MESSAGE_INTERVAL: ACCEPTED
AP: My custom 1Hz task running!
AP: My custom 1Hz task running!
fence present
Critical failure 0x100000 sysid=1 compid=1
AP: My custom 1Hz task running!
Flight battery 100 percent
AP: My custom 1Hz task running!
AP: EKF3 IMU1 origin set
AP: Field Elevation Set: 584m
AP: EKF3 IMU0 origin set
AP: My custom 1Hz task running!
AP: My custom 1Hz task running!
